{"editor":{"id":"cbc1fc5a-26b0-4972-8382-be55aa4427dd","locked":true,"offsetX":0,"offsetY":0,"zoom":100,"gridSize":0,"layers":[{"id":"d7e8bafa-1140-46a4-9019-bb4f23f31dbc","type":"diagram-links","isSvg":true,"transformed":true,"models":{"094e46b3-bf06-4d7b-95e9-0e29047dd4f8":{"id":"094e46b3-bf06-4d7b-95e9-0e29047dd4f8","type":"default","selected":false,"source":"0001-cb1a567b-b8db-4066-91cb-27a697a56d81","sourcePort":"66a453d3-26fc-49de-8859-19751d184b06","target":"883d815b-9c5b-49fc-ba7d-a656199e3e74","targetPort":"3ce1d22e-8b1c-4c42-b0a7-0638da6749b2","points":[{"id":"d4a722ec-0efb-4e43-ab08-62ed437e1ebd","type":"point","x":750,"y":161.10000610351562},{"id":"4634af93-2b4c-4270-831a-d31a74d21cce","type":"point","x":736.2875366210938,"y":227.5}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"},"6ee0842c-c92f-47e6-9b7b-6fc2944cb3a9":{"id":"6ee0842c-c92f-47e6-9b7b-6fc2944cb3a9","type":"default","selected":false,"source":"30235114-1447-4791-8bb2-d35880bbc4b1","sourcePort":"8dbcb3f5-fec1-4fad-aaf3-68f3f61cfe81","target":"883d815b-9c5b-49fc-ba7d-a656199e3e74","targetPort":"5f420d9e-4410-4ca3-8349-c92c33b08a4a","points":[{"id":"c979f2eb-c6a1-4c42-88f5-0ac369301e38","type":"point","x":263.5,"y":416.8000183105469},{"id":"5d52c0f1-3aad-4bed-8c78-b4472a1e65b2","type":"point","x":357.5,"y":418.3999938964844}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"},"808cdb17-b3e3-4707-b3d5-6c7cbd07e84d":{"id":"808cdb17-b3e3-4707-b3d5-6c7cbd07e84d","type":"default","selected":false,"source":"883d815b-9c5b-49fc-ba7d-a656199e3e74","sourcePort":"550c3c05-110d-45b8-99ae-23bbfe15f596","target":"c3b1b689-2693-4d76-8486-ea124e8c134b","targetPort":"8b69888a-4fd5-4c20-85cc-2f682d0d8fce","points":[{"id":"3a701bec-8302-4fa0-a3b1-54e25c667c88","type":"point","x":1115.0875244140625,"y":418.3999938964844},{"id":"ded2f886-9ad7-4abe-9774-112a09481f89","type":"point","x":1249.5,"y":417.8000183105469}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"}}},{"id":"9118b48a-26a5-4ebd-a131-3ffb34d7a166","type":"diagram-nodes","isSvg":false,"transformed":true,"models":{"0001-cb1a567b-b8db-4066-91cb-27a697a56d81":{"id":"0001-cb1a567b-b8db-4066-91cb-27a697a56d81","type":"basic.constant","selected":true,"x":688,"y":42,"ports":[{"id":"66a453d3-26fc-49de-8859-19751d184b06","type":"port.output","x":742.5,"y":153.60000610351562,"name":"constant-out","alignment":"bottom","parentNode":"0001-cb1a567b-b8db-4066-91cb-27a697a56d81","links":["094e46b3-bf06-4d7b-95e9-0e29047dd4f8"],"in":false,"label":"constant-out","hideLabel":true}],"data":{"name":"Frequency","value":"30.0","local":true}},"30235114-1447-4791-8bb2-d35880bbc4b1":{"id":"30235114-1447-4791-8bb2-d35880bbc4b1","type":"basic.input","selected":false,"x":170,"y":389,"ports":[{"id":"8dbcb3f5-fec1-4fad-aaf3-68f3f61cfe81","type":"port.output","x":256,"y":409.3000183105469,"name":"input-out","alignment":"right","parentNode":"30235114-1447-4791-8bb2-d35880bbc4b1","links":["6ee0842c-c92f-47e6-9b7b-6fc2944cb3a9"],"in":false,"label":"input-out","hideLabel":true}],"data":{"name":"E"}},"c3b1b689-2693-4d76-8486-ea124e8c134b":{"id":"c3b1b689-2693-4d76-8486-ea124e8c134b","type":"basic.output","selected":false,"x":1241,"y":390,"ports":[{"id":"8b69888a-4fd5-4c20-85cc-2f682d0d8fce","type":"port.input","x":1242,"y":410.3000183105469,"name":"output-in","alignment":"left","parentNode":"c3b1b689-2693-4d76-8486-ea124e8c134b","links":["808cdb17-b3e3-4707-b3d5-6c7cbd07e84d"],"in":true,"label":"output-in","hideLabel":true}],"data":{"name":"Out"}},"883d815b-9c5b-49fc-ba7d-a656199e3e74":{"id":"883d815b-9c5b-49fc-ba7d-a656199e3e74","type":"basic.code","selected":false,"x":349,"y":219,"ports":[{"id":"5f420d9e-4410-4ca3-8349-c92c33b08a4a","type":"port.input","x":350,"y":410.8999938964844,"name":"E","alignment":"left","parentNode":"883d815b-9c5b-49fc-ba7d-a656199e3e74","links":["6ee0842c-c92f-47e6-9b7b-6fc2944cb3a9"],"in":true,"label":"E","hideLabel":false},{"id":"550c3c05-110d-45b8-99ae-23bbfe15f596","type":"port.output","x":1107.5875244140625,"y":410.8999938964844,"name":"Out","alignment":"right","parentNode":"883d815b-9c5b-49fc-ba7d-a656199e3e74","links":["808cdb17-b3e3-4707-b3d5-6c7cbd07e84d"],"in":false,"label":"Out","hideLabel":false},{"id":"3ce1d22e-8b1c-4c42-b0a7-0638da6749b2","type":"port.parameter","x":728.7875366210938,"y":220,"name":"Frequency","alignment":"top","parentNode":"883d815b-9c5b-49fc-ba7d-a656199e3e74","links":["094e46b3-bf06-4d7b-95e9-0e29047dd4f8"],"in":true,"label":"Frequency","hideLabel":false}],"data":{"code":"import cv2\r\nimport numpy as np\r\nfrom time import sleep\r\nfrom utils.wires.wire_img import share_image\r\nfrom utils.wires.wire_str import read_string\r\nfrom utils.tools.freq_monitor import monitor_frequency\r\n\r\ndef loop(block_name, input_wires, output_wires, parameters, flags):\r\n\r\n    output_0 = share_image(output_wires[0])\r\n\r\n    enabled = False\r\n    try:\r\n        enable_wire = read_string(input_wires[0])\r\n    except IndexError:\r\n        enabled = True\r\n\r\n    required_frequency, update = float(parameters[0]), 1\r\n    control_data = np.array([0.0,0.03])\r\n\r\n    if flags[0] == 1:\r\n        monitor_frequency(block_name, control_data, required_frequency, update)\r\n\r\n    cap = cv2.VideoCapture(0)\r\n\r\n    try:\r\n    \r\n        while True:\r\n    \r\n            if enabled or (update := bool(enable_wire.get()[0])):\r\n                \r\n                control_data[0] += 1 \r\n                ret, frame = cap.read()\r\n                output_0.add(frame)\r\n                \r\n            sleep(control_data[1])\r\n            \r\n    except KeyboardInterrupt:\r\n    \r\n        cap.release()\r\n        enable_wire.release()\r\n        output_0.release()","params":[{"name":"Frequency"}],"ports":{"in":[{"name":"E"}],"out":[{"name":"Out"}]},"size":{"width":"721px","height":"334px"}}}}}]},"version":"3.0","package":{"name":"Camera","version":"1.0.0","description":"Captures Video Stream from Camera","author":"Muhammad Taha Suhail","image":"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjQ3MnB0IiB2aWV3Qm94PSIwIC04NyA0NzIgNDcyIiB3aWR0aD0iNDcycHQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0ibTQ2MiAzNS4xMjEwOTR2MjI3LjgyMDMxMmwtMTIxLjg3ODkwNi02Ni41NTA3ODFoLTEuMjEwOTM4di05NC43MTg3NWgxLjIxMDkzOHptMCAwIiBmaWxsPSIjMDBhY2VhIi8+PHBhdGggZD0ibTMzOC45MTAxNTYgMTk2LjM5MDYyNXY1MS4wMzEyNWMwIDIyLjA4OTg0NC0xNy45MTAxNTYgNDAtNDAgNDBoLTI0OC45MTAxNTZjLTIyLjA4OTg0NCAwLTQwLTE3LjkxMDE1Ni00MC00MHYtMTk3LjQyMTg3NWMwLTIyLjA4OTg0NCAxNy45MTAxNTYtNDAgNDAtNDBoMjQ4LjkxMDE1NmMyMi4wODk4NDQgMCA0MCAxNy45MTAxNTYgNDAgNDB6bTAgMCIgZmlsbD0iIzAwZWZkMSIvPjxwYXRoIGQ9Im00NjcuMTAxNTYyIDI2LjUxOTUzMWMtMy4wMzkwNjItMS44MDA3ODEtNi43OTY4NzQtMS44NjcxODctOS44OTg0MzctLjE3NTc4MWwtMTA4LjI5Njg3NSA1OS4xMzI4MTJ2LTM1LjQ3NjU2MmMtLjAzMTI1LTI3LjYwMTU2Mi0yMi4zOTg0MzgtNDkuOTY4NzUtNTAtNTBoLTI0OC45MDYyNWMtMjcuNjAxNTYyLjAzMTI1LTQ5Ljk2ODc1IDIyLjM5ODQzOC01MCA1MHYxOTcuNDIxODc1Yy4wMzEyNSAyNy41OTc2NTYgMjIuMzk4NDM4IDQ5Ljk2NDg0NCA1MCA1MGgyNDguOTEwMTU2YzI3LjYwMTU2My0uMDM1MTU2IDQ5Ljk2ODc1LTIyLjQwMjM0NCA1MC01MHYtMzQuODM5ODQ0bDEwOC4zMDA3ODIgNTkuMTMyODEzYzMuMDk3NjU2IDEuNjkxNDA2IDYuODU1NDY4IDEuNjI1IDkuODkwNjI0LS4xNzU3ODIgMy4wMzUxNTctMS44MDQ2ODcgNC44OTg0MzgtNS4wNzAzMTIgNC44OTg0MzgtOC42MDE1NjJ2LTIyNy44MTY0MDZjMC0zLjUzMTI1LTEuODYzMjgxLTYuODAwNzgyLTQuODk4NDM4LTguNjAxNTYzem0tMTM4LjE5MTQwNiAyMjAuOTAyMzQ0Yy0uMDE5NTMxIDE2LjU1ODU5NC0xMy40Mzc1IDI5Ljk4MDQ2OS0zMCAzMGgtMjQ4LjkxMDE1NmMtMTYuNTYyNS0uMDE5NTMxLTI5Ljk4MDQ2OS0xMy40NDE0MDYtMzAtMzB2LTE5Ny40MjE4NzVjLjAxOTUzMS0xNi41NjI1IDEzLjQzNzUtMjkuOTgwNDY5IDMwLTMwaDI0OC45MTAxNTZjMTYuNTYyNS4wMTk1MzEgMjkuOTgwNDY5IDEzLjQzNzUgMzAgMzB6bTEyMy4wODk4NDQtMS4zMzU5MzctMTAzLjA4OTg0NC01Ni4yODkwNjN2LTgxLjUzMTI1bDEwMy4wODk4NDQtNTYuMjkyOTY5em0wIDAiIGZpbGw9IiMwODM4NjMiLz48L3N2Zz4="},"design":{"board":"Python3-Noetic","graph":{"blocks":[{"id":"0001-cb1a567b-b8db-4066-91cb-27a697a56d81","type":"basic.constant","data":{"name":"Frequency","value":"30.0","local":true},"position":{"x":688,"y":42}},{"id":"30235114-1447-4791-8bb2-d35880bbc4b1","type":"basic.input","data":{"name":"E"},"position":{"x":170,"y":389}},{"id":"c3b1b689-2693-4d76-8486-ea124e8c134b","type":"basic.output","data":{"name":"Out"},"position":{"x":1241,"y":390}},{"id":"883d815b-9c5b-49fc-ba7d-a656199e3e74","type":"basic.code","data":{"code":"import cv2\r\nimport numpy as np\r\nfrom time import sleep\r\nfrom utils.wires.wire_img import share_image\r\nfrom utils.wires.wire_str import read_string\r\nfrom utils.tools.freq_monitor import monitor_frequency\r\n\r\ndef loop(block_name, input_wires, output_wires, parameters, flags):\r\n\r\n    output_0 = share_image(output_wires[0])\r\n\r\n    enabled = False\r\n    try:\r\n        enable_wire = read_string(input_wires[0])\r\n    except IndexError:\r\n        enabled = True\r\n\r\n    required_frequency, update = float(parameters[0]), 1\r\n    control_data = np.array([0.0,0.03])\r\n\r\n    if flags[0] == 1:\r\n        monitor_frequency(block_name, control_data, required_frequency, update)\r\n\r\n    cap = cv2.VideoCapture(0)\r\n\r\n    try:\r\n    \r\n        while True:\r\n    \r\n            if enabled or (update := bool(enable_wire.get()[0])):\r\n                \r\n                control_data[0] += 1 \r\n                ret, frame = cap.read()\r\n                output_0.add(frame)\r\n                \r\n            sleep(control_data[1])\r\n            \r\n    except KeyboardInterrupt:\r\n    \r\n        cap.release()\r\n        enable_wire.release()\r\n        output_0.release()","params":[{"name":"Frequency"}],"ports":{"in":[{"name":"E"}],"out":[{"name":"Out"}]},"size":{"width":"721px","height":"334px"}},"position":{"x":349,"y":219}}],"wires":[{"source":{"block":"0001-cb1a567b-b8db-4066-91cb-27a697a56d81","port":"constant-out"},"target":{"block":"883d815b-9c5b-49fc-ba7d-a656199e3e74","port":"Frequency"}},{"source":{"block":"30235114-1447-4791-8bb2-d35880bbc4b1","port":"input-out"},"target":{"block":"883d815b-9c5b-49fc-ba7d-a656199e3e74","port":"E"}},{"source":{"block":"883d815b-9c5b-49fc-ba7d-a656199e3e74","port":"Out"},"target":{"block":"c3b1b689-2693-4d76-8486-ea124e8c134b","port":"output-in"}}]}},"dependencies":{}}